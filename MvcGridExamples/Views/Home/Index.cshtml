@using MvcGrid
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    <link rel="stylesheet" type="text/css" href="~/Content/themes/jquery-ui-1.10.4.custom/css/cupertino/jquery-ui-1.10.4.custom.min.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/jquery.jqGrid/ui.jqgrid.css" />
}

@section Scripts
{
    @Scripts.Render("~/bundles/jqueryui")
    <script type="text/javascript" src="~/Scripts/i18n/grid.locale-en.js"></script>
    <script type="text/javascript" src="~/Scripts/jquery.jqGrid.js"></script>
    @Html.Grid((new GridSettings())
    .SetUrl("/Home/GetData")
    .SetDataType(GridDataType.Json)
    .SetRowNumber(25)
    .SetRowList(25, 50, 100)
    .SetViewRecords(true)
    .SetSortName("VisitTime")
    .SetSortOrder(SortOrder.Asc)
    .SetCaption("Caption")
    .SetHideGrid(false)
    .SetHeight("100%")
    .AddNavigator((new Navigator())
                    .SetAddButtonVisibility(false)
                    .SetEditButtonVisibility(false)
                    .SetDeleteButtonVisibility(false)
                    .SetSearchButtonVisibility(false)
                    .SetRefreshButtonVisibility(false))
    .AddJsonReader(JsonReader.Default)
    .AddColumn((new GridFormatterColumn())
                .SetName("UserAgent")
                .SetLabel("User Agent")
                .SetWidth(670)
                .SetSortable(false))
    .AddColumn((new GridFormatterColumn())
                .SetName("ScreenSize")
                .SetLabel("Screen Size")
                .SetWidth(70)
                .SetSortable(false))
    .AddColumn((new GridFormatterColumn())
                .SetName("Referer")
                .SetLabel("Referer")
                .SetWidth(100)
                .SetSortable(false))
    .AddColumn((new GridFormatterColumn())
                .SetFormatter("date")
                .SetFormatOption("newformat", "Y-m-d H:i:s")
                .SetFormatOption("srcformat", "Y-m-d H:i:s")
                .SetName("VisitTime")
                .SetLabel("Visit Time")
                .SetWidth(150)
                .SetSortable(false))
    .AddColumn((new GridFormatterColumn())
                .SetFormatter("number")
                .SetFormatOption("decimalPlaces", 4)
                .SetName("VisitNumber")
                .SetLabel("Visit Number")
                .SetWidth(100))
    .AddColumn((new GridImageColumn())
                .AddImage((new GridImage())
                            .SetImagePath("/Content/images/b_red_16.png")
                            .DisplayWhen(x=> x["Status"] == "0")
                            .SetToolTip("Blocked"))
                .AddImage((new GridImage())
                            .SetImagePath("/Content/images/b_green_16.png")
                            .DisplayWhen(x=> x["Status"] == "1")
                            .SetToolTip("Active"))
                .SetName("Status") 
                .SetLabel("Status")
                .SetWidth(50)
                .SetAlign(TextAlign.Center)
                .SetSortable(false)))
}